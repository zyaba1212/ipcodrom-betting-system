{% extends "betting/base.html" %}

{% block title %}–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - –ò–ø–ø–æ–¥—Ä–æ–º{% endblock %}

{% block content %}
<div class="stats-container">
    <h2>üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    
    <div class="stats-grid">
        <div class="stat-card large">
            <h3>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <div class="stat-item">
                <span>–í—Å–µ–≥–æ —Å—Ç–∞–≤–æ–∫:</span>
                <strong>{{ total_bets }}</strong>
            </div>
            <div class="stat-item">
                <span>–í—ã–∏–≥—Ä–∞–Ω–æ —Å—Ç–∞–≤–æ–∫:</span>
                <strong>{{ won_bets }}</strong>
            </div>
            <div class="stat-item">
                <span>–ü—Ä–æ–∏–≥—Ä–∞–Ω–æ —Å—Ç–∞–≤–æ–∫:</span>
                <strong>{{ lost_bets }}</strong>
            </div>
            <div class="stat-item">
                <span>–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥:</span>
                <strong>{{ win_percentage }}%</strong>
            </div>
        </div>
        
        <div class="stat-card large">
            <h3>–§–∏–Ω–∞–Ω—Å—ã</h3>
            <div class="stat-item">
                <span>–û–±—â–∏–π –≤—ã–∏–≥—Ä—ã—à:</span>
                <strong class="positive">{{ total_won }}‚ÇΩ</strong>
            </div>
            <div class="stat-item">
                <span>–û–±—â–∏–π –ø—Ä–æ–∏–≥—Ä—ã—à:</span>
                <strong class="negative">{{ total_lost }}‚ÇΩ</strong>
            </div>
            <div class="stat-item">
                <span>–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å:</span>
                <strong class="{% if net_profit >= 0 %}positive{% else %}negative{% endif %}">
                    {{ net_profit }}‚ÇΩ
                </strong>
            </div>
        </div>
    </div>
    
    <!-- –ì—Ä–∞—Ñ–∏–∫ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ -->
    <div class="success-chart">
        <h3>–£—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å—Ç–∞–≤–æ–∫ –ø–æ –º–µ—Å—è—Ü–∞–º</h3>
        <div class="chart-bars">
            {% for month in monthly_stats %}
            <div class="chart-bar">
                <div class="bar-fill" style="height: {{ month.win_percentage }}%"></div>
                <span class="bar-label">{{ month.month }}</span>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="stats-actions">
        <a href="{% url 'bet_history' %}" class="btn-primary">üìã –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫</a>
        <a href="{% url 'place_bet' %}" class="btn-primary">üéØ –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</a>
        <a href="{% url 'deposit' %}" class="btn-secondary">üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç</a>
    </div>
</div>

<style>
.success-chart {
    background: rgba(255, 255, 255, 0.95);
    padding: 25px;
    border-radius: 10px;
    margin: 30px 0;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.chart-bars {
    display: flex;
    justify-content: space-around;
    align-items: end;
    height: 200px;
    margin: 20px 0;
    border-bottom: 2px solid #ecf0f1;
    padding-bottom: 20px;
}

.chart-bar {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 50px;
}

.bar-fill {
    width: 30px;
    background: linear-gradient(to top, #3498db, #2980b9);
    border-radius: 3px 3px 0 0;
    transition: height 0.3s ease;
    min-height: 10px;
}

.bar-label {
    margin-top: 10px;
    font-size: 0.9em;
    color: #2c3e50;
    font-weight: bold;
}

.stats-actions {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 30px;
}
</style>
{% endblock %}