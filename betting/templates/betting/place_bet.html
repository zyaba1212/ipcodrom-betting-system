{% extends 'betting/base.html' %}

{% block title %}Размещение ставок - Система ставок{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h1 class="card-title">Размещение ставок</h1>
    </div>
    
    {% if user.is_authenticated %}
    <div class="user-balance-info">
        <p>Ваш баланс: <strong class="user-balance">{{ user.betting_profile.balance }} ₽</strong></p>
    </div>
    {% endif %}

    <div class="race-selection">
        <h2>Выберите забег для ставки</h2>
        
        <div class="race-list">
            {% for race in races %}
            <div class="race-card">
                <div class="race-header">
                    <div class="race-name">{{ race.name }}</div>
                    <div class="race-status status-{{ race.status }}">
                        {{ race.get_status_display }}
                    </div>
                </div>
                <div class="race-details">
                    <p><strong>Время:</strong> {{ race.start_time }}</p>
                    <p><strong>Лошади:</strong> 
                        {% for horse in race.horses.all %}
                        {{ horse.name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </p>
                </div>
                <a href="{% url 'betting:place_bet_race' race.id %}" class="btn btn-primary">
                    Выбрать лошадь
                </a>
            </div>
            {% empty %}
            <div class="no-races">
                <p>На данный момент нет доступных забегов для ставок.</p>
                <p>Пожалуйста, проверьте позже.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}